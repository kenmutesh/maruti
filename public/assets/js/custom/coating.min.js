let currentlyActiveType="MARUTI";function calculatePowderEstimateAluminium(inputElement){const form=inputElement.form;let weight=form.goods_weight.valueAsNumber;const profile=form.profile_type.value;let result;switch(isNaN(weight)&&(weight=0),profile){case"1":result=weight/28;break;case"2":result=weight/24;break;case"3":result=weight/20;break;default:result=0}form.powder_estimate.value=Math.ceil(result.toFixed(2)),document.querySelectorAll(".owner-kg").forEach(weightInput=>{weightInput.value=parseFloat(parseFloat(weight)+Math.ceil(parseFloat(result))).toFixed(2);const changeEvent=new Event("change");weightInput.dispatchEvent(changeEvent)})}const marutiCoatingDivs=document.querySelectorAll(".maruti-coating"),ownerAluminiumDivs=document.querySelectorAll(".owner-aluminium-coating"),ownerSteelDivs=document.querySelectorAll(".owner-steel-coating"),directSale=document.querySelectorAll(".direct-sale");function toggleActiveItemList(radioBtn){const radioValue=radioBtn.getAttribute("data-value");"MARUTI"===radioValue?(marutiCoatingDivs.forEach(div=>{div.style.display="block";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!1})}),ownerAluminiumDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerSteelDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),directSale.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})})):"OWNER-COMBINED"===radioValue?(marutiCoatingDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerAluminiumDivs.forEach(div=>{div.style.display="block";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!1})}),ownerSteelDivs.forEach(div=>{div.style.display="block";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!1})}),directSale.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),currentlyActiveType="OWNER"):"OWNER-ALUMINIUM"===radioValue?(marutiCoatingDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerAluminiumDivs.forEach(div=>{div.style.display="block";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!1})}),ownerSteelDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),directSale.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),currentlyActiveType="OWNER"):"OWNER-STEEL"===radioValue?(marutiCoatingDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerAluminiumDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerSteelDivs.forEach(div=>{div.style.display="block";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!1})}),directSale.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),currentlyActiveType="OWNER"):(marutiCoatingDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerAluminiumDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerSteelDivs.forEach(div=>{div.style.display="none";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),directSale.forEach(div=>{div.style.display="block";const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!1})}),currentlyActiveType="MARUTI")}function updateAmountOwnerUnits(inputElement){const tableRow=inputElement.closest("tr"),total=tableRow.querySelector('input[name="amount[]"]'),itemKG=tableRow.querySelector('input[name="item_kg[]"]'),unitCost=tableRow.querySelector('input[name="aluminium_unit_price[]"]');total.value=parseFloat(itemKG.value*unitCost.value).toFixed(2),updateCoatingJobGrandTotal()}function prefillArea(inputElement){const parent=inputElement.closest("tr"),length=parent.querySelector('input[name="steel_item_length[]"]').value,width=parent.querySelector('input[name="steel_item_width[]"]').value;"LINEAR METRES"!=parent.querySelector('select[name="size[]"').value&&(parent.querySelector(".sq-metre-input").value=parseFloat(length*width).toFixed(2));const event=new Event("change");parent.querySelector(".sq-metre-input").dispatchEvent(event),parent.querySelector('input[name="sq_metre[]"]').dispatchEvent(event)}function changeItemAmountCoating(inputElement,scaleUp=!1){let parent;parent=inputElement.parentElement.parentElement;let sqMetres=1;parseFloat(parent.querySelector('input[name="sq_metre[]"]').value)>0&&(sqMetres=parent.querySelector('input[name="sq_metre[]"]').value);const unitCost=parent.querySelector('input[name="steel_unit_price[]"]').value,itemQty=parent.querySelector('input[name="steel_item_qty[]"]').value;if("LINEAR METRES"==parent.querySelector('select[name="size[]"').value){parent.querySelector('input[name="steel_item_length[]"]').value=parseFloat(parent.querySelector('input[name="sq_metre[]"]').value/itemQty).toFixed(2);let sqMetresPowder=parent.querySelector('input[name="steel_item_length[]"]').value*parent.querySelector('input[name="steel_item_width[]"]').value;parent.querySelector('input[name="steel_powder_estimate[]"]').value=parseFloat(sqMetresPowder*itemQty/3).toFixed(2),updatePowderEstimateSteel(),parent.querySelector('select[name="size[]"').selectedOptions[0].getAttribute("data-per")?parent.querySelector('input[name="steel_amount[]"]').value=parseFloat(itemQty.value*unitCost).toFixed(2):parent.querySelector('input[name="steel_amount[]"]').value=parseFloat(sqMetres*unitCost).toFixed(2),debounce(()=>saveInput(parent))()}else{let sqMetresPowder=parent.querySelector('input[name="steel_item_length[]"]').value*parent.querySelector('input[name="steel_item_width[]"]').value;parent.querySelector('input[name="steel_powder_estimate[]"]').value=parseFloat(sqMetresPowder*itemQty/3).toFixed(2),updatePowderEstimateSteel(),parent.querySelector('select[name="size[]"').selectedOptions[0].getAttribute("data-per")?parent.querySelector('input[name="steel_amount[]"]').value=parseFloat(unitCost*itemQty.value).toFixed(2):parent.querySelector('input[name="steel_amount[]"]').value=parseFloat(unitCost*itemQty).toFixed(2)}updateCoatingJobGrandTotal()}function updatePowderEstimateSteel(){const estimates=document.querySelectorAll('input[name="steel_powder_estimate[]"]'),mainEstimate=document.querySelector('input[name="powder_estimate"');let totalEstimate=0;for(const estimate of estimates)totalEstimate+=parseFloat(estimate.value)||0;mainEstimate.value=totalEstimate}function debounce(func,timeout=2500){let timer;return(...args)=>{clearTimeout(timer),timer=setTimeout(()=>{func.apply(this,args)},timeout)}}function saveInput(parent){""==parent.querySelector('input[name="steel_item_width[]"]').value&&alert("Requiring item width for powder estimate")}function updateCoatingJobGrandTotal(){let totalAmount;totalAmount="OWNER"==currentlyActiveType?document.querySelectorAll(".owner-total"):document.querySelectorAll(".maruti-total");let grandTotal=0;for(const input of totalAmount)input.disabled||input.value>0&&(grandTotal=parseFloat(grandTotal)+parseFloat(input.value));document.querySelector('input[name="grand_total"]').value=parseFloat(grandTotal).toFixed(2)}function prefillItemRowSteel(selectElement){const optionSelected=selectElement.selectedOptions[0],itemRow=selectElement.parentElement.parentElement,inventoryTypeInput=itemRow.querySelector('input[name="steel_inventory_type[]"]'),itemIDInput=itemRow.querySelector('input[name="steel_item_id[]"]'),codeInput=itemRow.querySelector('input[name="steel_item_code[]"]'),descriptionInput=itemRow.querySelector('input[name="steel_item_description[]"]'),warehouseID=itemRow.querySelector('input[name="steel_warehouse_id[]"]'),binID=itemRow.querySelector('input[name="steel_bin_id[]"]');let description=optionSelected.getAttribute("attr-data-description"),max=optionSelected.getAttribute("attr-current-quantity"),minThreshold=optionSelected.getAttribute("attr-min-threshold"),code=optionSelected.getAttribute("attr-data-code"),cost=optionSelected.getAttribute("attr-data-cost"),warehouse=optionSelected.getAttribute("attr-warehouse-id"),bin=optionSelected.getAttribute("attr-bin-id");inventoryTypeInput.value="POWDER",warehouseID.value=warehouse,binID.value=bin,itemIDInput.value=selectElement.value,descriptionInput.value=description,codeInput.value=code}function prefillItemRowMaruti(selectElement){const optionSelected=selectElement.selectedOptions[0],itemRow=selectElement.closest("tr"),qtyInput=itemRow.querySelector('input[name="maruti_item_qty[]"]'),unitPriceInput=itemRow.querySelector('input[name="maruti_unit_price[]"]'),vatInput=itemRow.querySelector('input[name="maruti_item_vat[]"]'),uomInput=itemRow.querySelector('input[name="maruti_item_uom[]"]');vatInput.value=optionSelected.getAttribute("attr-data-price-vat"),unitPriceInput.value=optionSelected.getAttribute("attr-data-price"),uomInput.value=optionSelected.getAttribute("attr-data-uom"),qtyInput.max=optionSelected.getAttribute("attr-data-current-quantity"),qtyInput.value=1,calculateMarutiItemRowTotal(qtyInput)}function calculateMarutiItemRowTotal(inputElement){const itemRow=inputElement.closest("tr"),qtyInput=itemRow.querySelector('input[name="maruti_item_qty[]"]'),unitPriceInput=itemRow.querySelector('input[name="maruti_unit_price[]"]'),vatInput=itemRow.querySelector('input[name="maruti_item_vat[]"]'),uomInput=itemRow.querySelector('input[name="maruti_item_uom[]"]'),amountInput=itemRow.querySelector('input[name="maruti_item_amount[]"]');amountInput.value=parseFloat(qtyInput.valueAsNumber*unitPriceInput.valueAsNumber).toFixed(2),updateCoatingJobGrandTotal()}function prefillItemRowMarutiDirect(selectElement){const optionSelected=selectElement.selectedOptions[0],itemRow=selectElement.closest("tr"),nameInput=itemRow.querySelector('input[name="custom_item_name[]"]');nameInput&&(""==selectElement.value?nameInput.readOnly=!1:(nameInput.value=selectElement.selectedOptions[0].innerHTML.trim(),nameInput.readOnly=!0));const qtyInput=itemRow.querySelector('input[name="maruti_direct_item_qty[]"]'),kgInput=itemRow.querySelector('input[name="maruti_direct_item_kg[]"]'),unitPriceInput=itemRow.querySelector('input[name="maruti_direct_unit_price[]"]'),vatInput=itemRow.querySelector('input[name="maruti_direct_unit_vat[]"]'),uomInput=itemRow.querySelector('input[name="maruti_direct_uom[]"]'),typeInput=itemRow.querySelector('input[name="maruti_direct_inventory_type[]"]');vatInput.value=optionSelected.getAttribute("attr-data-price-vat")||0,unitPriceInput.value=optionSelected.getAttribute("attr-data-price")||0,uomInput.value=optionSelected.getAttribute("attr-data-uom")||"UNITS","Powder"==optionSelected.parentElement.label?(qtyInput.readOnly=!0,qtyInput.value=0,kgInput.readOnly=!1,kgInput.max=optionSelected.getAttribute("attr-data-current-quantity"),kgInput.value=1,typeInput.value=optionSelected.parentElement.label):(kgInput.readOnly=!0,kgInput.value=0,qtyInput.readOnly=!1,qtyInput.max=optionSelected.getAttribute("attr-data-current-quantity"),qtyInput.value=1,typeInput.value=optionSelected.parentElement.label||""),calculateMarutiDirectItemRowTotal(qtyInput)}function calculateMarutiDirectItemRowTotal(inputElement){const itemRow=inputElement.closest("tr"),qtyInput=itemRow.querySelector('input[name="maruti_direct_item_qty[]"]'),kgInput=itemRow.querySelector('input[name="maruti_direct_item_kg[]"]'),unitPriceInput=itemRow.querySelector('input[name="maruti_direct_unit_price[]"]'),amountInput=itemRow.querySelector('input[name="maruti_direct_amount[]"]');qtyInput.readOnly?amountInput.value=parseFloat(kgInput.valueAsNumber*unitPriceInput.valueAsNumber).toFixed(2):amountInput.value=parseFloat(qtyInput.valueAsNumber*unitPriceInput.valueAsNumber).toFixed(2),updateCoatingJobGrandTotal()}function prefillItemRow(selectElement,inventory=!1,coating=!1,goodsWeight=!1){const optionSelected=selectElement.selectedOptions[0],itemRow=selectElement.closest("tr"),inventoryTypeInput=itemRow.querySelector('input[name="inventory_type[]"]'),itemIDInput=itemRow.querySelector('input[name="item_id[]"]'),nameInput=itemRow.querySelector('input[name="item_name[]"]'),codeInput=itemRow.querySelector('input[name="item_code[]"]'),descriptionInput=itemRow.querySelector('input[name="item_description[]"]'),qtyInput=itemRow.querySelector('input[name="item_qty[]"]'),kgInput=itemRow.querySelector('input[name="item_kg[]"]'),taxInput=itemRow.querySelector('input[name="item_tax[]"]'),unitInput=itemRow.querySelector('input[name="unit_cost[]"]'),amountInput=itemRow.querySelector('input[name="amount[]"]'),itemUnitInput=itemRow.querySelector('input[name="item_unit[]"]'),warehouseID=itemRow.querySelector('input[name="warehouse_id[]"]'),binID=itemRow.querySelector('input[name="bin_id[]"]');if(inventory){document.querySelector(".new-item")&&(document.querySelector(".new-item").value=null);let description=optionSelected.getAttribute("attr-data-description"),max=optionSelected.getAttribute("attr-current-quantity"),minThreshold=optionSelected.getAttribute("attr-min-threshold"),code=optionSelected.getAttribute("attr-data-code"),cost=optionSelected.getAttribute("attr-data-cost"),warehouse=optionSelected.getAttribute("attr-warehouse-id"),bin=optionSelected.getAttribute("attr-bin-id"),unit=optionSelected.getAttribute("attr-data-unit");inventoryTypeInput.value=optionSelected.parentElement.label,warehouseID.value=warehouse,binID.value=bin,itemUnitInput&&(itemUnitInput.value=unit),"POWDER"==optionSelected.parentElement.label?(qtyInput.readOnly=!0,qtyInput.value=0,kgInput.readOnly=!1,kgInput.value=1,kgInput.max=max,kgInput.min=0):(qtyInput.readOnly=!1,qtyInput.value=1,qtyInput.max=max,qtyInput.min=0,coating&&qtyInput.setAttribute("attr-min-threshold",minThreshold),kgInput.readOnly=!0,kgInput.value=0),itemIDInput.value=selectElement.value,descriptionInput.value=description,codeInput.value=code,nameInput.value=optionSelected.getAttribute("attr-data-name"),unitInput.value=cost}else $((function(){$(selectElement).next().next().val("")})),inventoryTypeInput.value=optionSelected.value,$(".search-select").select2("destroy"),setTimeout((function(){$(".search-select").select2("destroy")}),500),$("select:not(.ms)").selectpicker("refresh"),"POWDER"==optionSelected.value?(qtyInput.readOnly=!0,qtyInput.value=0,kgInput.readOnly=!1,kgInput.value=1):(qtyInput.readOnly=!1,qtyInput.value=1,kgInput.readOnly=!0,kgInput.value=0),warehouseID.value="",binID.value="",itemIDInput.value="",descriptionInput.value="",codeInput.value="",nameInput.value="",unitInput.value=1,taxInput.value=1;if(goodsWeight){const goodWeight=6.4*parseFloat(optionSelected.getAttribute("attr-weight"))*qtyInput.value;kgInput.value=goodWeight}calculateItemRowTotal(selectElement)}function calculateItemRowTotal(inputElement,coating=!1,goodsWeight=!1){const itemRow=inputElement.closest("tr"),inventoryTypeInput=itemRow.querySelector('input[name="inventory_type[]"]'),qtyInput=itemRow.querySelector('input[name="item_qty[]"]'),kgInput=itemRow.querySelector('input[name="item_kg[]"]'),taxInput=itemRow.querySelector('input[name="item_tax[]"]'),unitInput=itemRow.querySelector('input[name="unit_cost[]"]'),amountInput=itemRow.querySelector('input[name="amount[]"]');let taxAddition;coating&&(parseInt(qtyInput.max),parseInt(qtyInput.value),parseInt(qtyInput.getAttribute("attr-min-threshold"))),taxAddition=isNaN(parseFloat(taxInput.value))||0==parseFloat(taxInput.value)?1:parseFloat((parseFloat(taxInput.value)+parseFloat(100))/100);const taxedTotal=parseFloat(1*unitInput.value).toFixed(2);let finalAmount;if(finalAmount="POWDER"==inventoryTypeInput.value?parseFloat(taxedTotal*kgInput.value).toFixed(2):parseFloat(taxedTotal*qtyInput.value).toFixed(2),amountInput.value=finalAmount,goodsWeight){const goodWeight=6.4*parseFloat(itemRow.querySelector("select").selectedOptions[0].getAttribute("attr-weight"))*qtyInput.value;kgInput.value=goodWeight}updateCoatingJobGrandTotal()}function toggleManualArea(checkbox){const parent=checkbox.parentElement.parentElement;checkbox.checked?(parent.querySelector('input[name="steel_item_length[]"]').value=0,parent.querySelector('input[name="steel_item_length[]"]').readOnly=!0,parent.querySelector('input[name="steel_item_width[]"]').value=0,parent.querySelector('input[name="sq_metre[]"]').value=0,parent.querySelector('input[name="sq_metre[]"]').readOnly=!1):(parent.querySelector('input[name="steel_item_length[]"]').value=0,parent.querySelector('input[name="steel_item_length[]"]').readOnly=!1,parent.querySelector('input[name="steel_item_width[]"]').value=0,parent.querySelector('input[name="sq_metre[]"]').value=0,parent.querySelector('input[name="sq_metre[]"]').readOnly=!0)}function addItemRow(selector){const tableBody=document.querySelector(selector);$(tableBody.querySelectorAll("select:not(.ms)")).selectpicker("destroy"),$(tableBody.querySelectorAll(".search-select")).select2("destroy");const itemListRow=tableBody.querySelector("tr"),clonedRow=itemListRow.cloneNode(!0),inputs=clonedRow.querySelectorAll("input"),selectElements=clonedRow.querySelectorAll("select");[...inputs].forEach(input=>{"OWNER"==currentlyActiveType?"item_kg[]"!=input.name&&(input.value=""):input.value=""}),[...selectElements].forEach((selectElement,index)=>{selectElement.options[0].selected=!0}),tableBody.appendChild(clonedRow),setTimeout(()=>{$(".search-select").select2(),$("select:not(.ms)").selectpicker()},400)}function prefillRALData(selectElement){const color=selectElement.selectedOptions[0].getAttribute("attr-data-color"),code=selectElement.selectedOptions[0].getAttribute("attr-data-code");selectElement.form.color.value=color,selectElement.form.code.value=code}function removeRow(btnElement,edit=!1,inputName="",totalRow=""){const tableBody=btnElement.closest("tbody"),itemListRow=tableBody.querySelectorAll("tr");if(edit)if(itemListRow.length>1)btnElement.parentElement.parentElement.classList.add("d-none"),btnElement.parentElement.parentElement.querySelector(`input[name="${inputName}"]`).checked=!0,btnElement.parentElement.parentElement.querySelector(`.${totalRow}`).classList.remove(totalRow);else{const inputs=btnElement.parentElement.parentElement.querySelectorAll("input"),selectElements=btnElement.parentElement.parentElement.querySelectorAll("select");[...inputs].forEach(input=>{input.value=""}),[...selectElements].forEach((selectElement,index)=>{selectElement.options[0].selected=!0})}else if(itemListRow.length>1)btnElement.parentElement.parentElement.remove();else{const inputs=btnElement.parentElement.parentElement.querySelectorAll("input"),selectElements=btnElement.parentElement.parentElement.querySelectorAll("select");[...inputs].forEach(input=>{input.value=""}),[...selectElements].forEach((selectElement,index)=>{selectElement.options[0].selected=!0})}updateCoatingJobGrandTotal()}function toggleSizeActive(selectElement){"-"==selectElement.value?selectElement.nextElementSibling.disabled=!1:selectElement.nextElementSibling.disabled=!0,"LINEAR METRES"==selectElement.value?(document.querySelector(".linear-metre-input").disabled=!1,document.querySelector(".sq-metre-input").disabled=!0):(document.querySelector(".linear-metre-input").disabled=!0,document.querySelector(".sq-metre-input").disabled=!1)}function toggleCollapse(btnElement){const parent=btnElement.parentElement.parentElement;$(parent).find(".collapse").collapse("toggle")}ownerAluminiumDivs.forEach(div=>{const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerAluminiumDivs.forEach(div=>{const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),ownerSteelDivs.forEach(div=>{const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),directSale.forEach(div=>{const inputs=div.querySelectorAll("input");inputs.forEach(input=>{input.disabled=!0})}),window.addEventListener("load",()=>{toggleActiveItemList(document.querySelector('input[name="belongs_to"]:checked'))});
//# sourceMappingURL=coating.min.js.map